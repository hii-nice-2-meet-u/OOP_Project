@startuml
skinparam classAttributeIconSize 0
' skinparam linetype ortho
skinparam nodesep 60
skinparam ranksep 70

skinparam groupInheritance 2 

title Board Game Cafe System Class Diagram 

' ==========================================
' PACKAGES (GROUPING)
' ==========================================

package "Management Core" {
    class BoardGameCafeSystem {
        - version : str
        - orders : List<Order>
        - reservations : List<Reservation>
        - branches : List<BoardGameCafeBranch>
        + add_branch(cafe : BoardGameCafe)
        + remove_branch(cafe_id : str = None, name : str = None)

        ' ==========================================
        ' Registration & Login Methods
        ' ==========================================
        + register_new_member(): Member
        + login_user(username : str, password : str) : bool

        '===========================================
        ' System Log Methods
        '===========================================
        + check_in_play_table()
        + check_out_play_table(table_name : str)
        + create_reservation()
        + check_availability()
        + confirm_reservation()
        + cancel_reservation()
        
        '===========================================
        ' Order & Payment Methods
        '===========================================
        + view_menu() : MenuList
        + place_order(order : Order) : bool
        + process_payment(payment : Payment) : bool

        '===========================================
        ' Report Generation Methods
        '===========================================

        + get_reservation_report(date : date)
        + get_sales_report(date : date) 
    }

    class BoardGameCafeBranch {
        - cafe_id : str
        - name : str
        - location : str
        - BoardGames : List<BoardGame>
        - PlayTables : List<PlayTable>
        - inventory : MenuList
        + get_Reservation_schedule(date : date) : List<Reservation>
    }

    abstract class PlayTable {
        - price_per_hour : float
        - table_id : str
        - table_name : str /' e.g., V1, V2, S1, S2 '/
        - capacity : int
        - status : str
        - active_orders : List<ItemOrder>
        + assign_customer()
        + clear_table()
        + order_item(item : MenuItem, qty : int) : ItemOrder
        + calculate_price(duration : float) : float
        + get_menu_ordered() : List<MenuItem>
    }

    class PlayTableStandard {
        - price_per_hour : 50.00
        - table_id : str
        - capacity : int
        - status : str
        + assign_customer()
        + clear_table()
    }

    class PlayTableVIP {
        - price_per_hour : 50.00
        - table_id : str
        - capacity : int
        - status : str
        + assign_customer()
        + clear_table()
    }
}
package "Person & Auth" {
    abstract class Person {
        - user_id : str
        - name : str
        - contact : str
    }

    class Manager {
        + approve_void_bill(order_id : str) : bool
        + add_staff(staff : Staff) : void
        + remove_staff(staff_id : str) : void
        + override_inventory_stock(item_id : str, qty : int) : void
        + view_daily_sales() : FinancialLog
    }

    class Staff {
        - staff_id : str
        - salary : float
        + take_order(order : Order) : void
        + serve_item(item : MenuItem) : void
        + assign_table()
        + check_student_card()
        + check_booking_status(booking_id : str) : Reservation
        + assign_walk_in_customer(table : PlayTable) : bool
        + register_new_member(customer : Customer) : Member
        + handle_check_in(reservation : Reservation) : void
    }

    class Customer {
        - total_spent : float
        - birthdate : date

    }

    class Member {
        - member_id : str
        - panalty_points : int
        - member_tier : str
        - max_booking_duration : int
        - max_active_booking_quota : int
        - max_advance_booking_days : int
        + get_discount(): float
        + get_max_booking_duration() :int
        + get_max_active_booking_quota() :int
        + get_max_advance_booking_days() :int
    }

    class TempCustomer {
        - temp_id : str
        - queue_token : str
        - pax_count : int
        - arrival_time : datetime
        - contact_number : str
    
    }
    
}
package "Inventory & Menu" {
    class MenuList {
        - items : List<MenuItem>
        + item_add()
        + item_remove()
    }

    abstract class MenuItem {
        - item_id : str
        - name : str
        - price : float
        + get_price(): float
    }

    class Food {
        - topping : list(str)
        + get_price(): float
    }

    class Drink {
        - cup_size : str
        + get_price(): float
    }

    class BoardGame {
        - game_id : str
        - game_name : str
        - genre : str
        - status : str
        - price : float
        + update_condition()
        + get_price(): float
    }
}

package "Operations (Order & Resv)" {

    class ItemOrder {
        - order_id : str
        - items : MenuItem
        - quantity : int
        - play_table : PlayTable
        - status : str

        + calculate_total()
        + check_all_served()
    }

    class Payment {
        - payment_id : str
        - amount : float
        - payment_method : PaymentMethod
        + process_payment()
    }

    abstract class PaymentMethod {
        - method_id : str
        - method_name : str
        + validate_method() : bool
    }

    class Cash {
        + validate_method() : bool
    }
    class Card {
        + validate_method() : bool
    }
    class OnlinePayment {
        + validate_method() : bool
    }


    class Reservation {
        - reservation_id : str
        - customer : Customer
        - date : date
        - start_time : time
        - end_time : time
        - play_table : PlayTable
        - pax: int
        - branch : BoardGameCafeBranch
        - status : str
        + get_details() : str
    }
}
' ==========================================
' RELATIONSHIPS
' ==========================================

' --- 1. Main Structure Hierarchy ---
BoardGameCafeSystem "1" *--> "*" BoardGameCafeBranch
BoardGameCafeSystem "1" *--> "*" Person
BoardGameCafeBranch "1" *--> "*" BoardGame

' --- 2. Sub-Systems Connections ---
BoardGameCafeBranch "1" --> "1" MenuList

' --- 3. Inheritance Grouping (Person) ---

Person <|-- Manager
Person <|-- Staff
Person <|-- Customer
Customer <|-- Member
Customer <|-- TempCustomer
PlayTable <|-- PlayTableStandard
PlayTable <|-- PlayTableVIP

' --- 4. Inheritance Grouping (Items) ---
MenuItem <|-- Food
MenuItem <|-- Drink
MenuList "1" o--> "*" MenuItem
PlayTable "1" o--> "*" ItemOrder

' --- 5. Inheritance Grouping (Ops) ---
PaymentMethod <|-- Cash
PaymentMethod <|-- Card
PaymentMethod <|-- OnlinePayment

' --- 6. Operational Flow (Minimal Arrows) ---
Payment "1" --> "1" PaymentMethod
Reservation "1" --> "*" Payment
BoardGameCafeSystem "1" --> "1" Payment
ItemOrder "*" <-- "1" PlayTable
BoardGameCafeBranch "1" --> "*" PlayTable

BoardGameCafeBranch "1" --> "*" ItemOrder
BoardGameCafeSystem "1" --> "*" Reservation

@enduml