@startuml
skinparam classAttributeIconSize 0
' skinparam linetype ortho
skinparam nodesep 60
skinparam ranksep 70

skinparam groupInheritance 2 

title Board Game Cafe System Class Diagram 

' ==========================================
' PACKAGES (GROUPING)
' ==========================================

package "Management Core" {
    class BoardGameCafeSystem {
        - version : str
        + add_branch(cafe : BoardGameCafe)
        + aggregate_reports()
    }

    class BoardGameCafe {
        - cafe_id : str
        - name : str
        - location : str
        + generate_report(type : str)
        + log_event(log : SystemLog)
    }

    class Lobby {
        - lobby_id : str
        - floor : int
        + get_available_tables()
    }

    class PlayTable {
        - table_id : str
        - capacity : int
        - status : str
        + assign_customer()
        + clear_table()
    }
}

package "Person & Auth" {
    abstract class Person {
        - user_id : str
        - name : str
        - contact : str
        + login()
    }

    class Owner {
        + view_financial_summary()
    }

    class Manager {
        + manage_staff_schedule()
    }

    class Staff {
        - staff_id : str
        - shift_start : datetime
        + taking_orders()
    }

    class Reception {
        + assign_table()
    }

    class Customer {
        - customer_id : str
        - total_spent : float
        + make_reservation()
    }

    class Member {
        - member_id : str
        - points : int
        + redeem_points()
    }

    class MemberSilver {
        - discount : 5%
    }
    class MemberGold {
        - discount : 10%
    }
    class MemberPlatinum {
        - discount : 15%
    }
    
    class NonMember {
        + register()
    }
}

package "Inventory & Menu" {
    class MenuList {
        - items : List<MenuItem>
        + item_add()
        + item_remove()
    }

    abstract class MenuItem {
        - item_id : str
        - name : str
        - price : float
        + get_price(): float
    }

    class Food {
        + get_price(): float
    }

    class Drink {
        + get_price(): float
    }

    class BoardGame {
        - game_id : str
        - status : str
        + update_condition()
    }
}

package "Operations (Order & Resv)" {
    class OrderSystem {
        - orders : List<Order>
        + create_order()
    }

    class Order {
        - order_id : str
        - status : str
        - net_amount : float
        - play_table : PlayTable
        + calculate_total()
        + check_all_served()
    }

    class Payment {
        - payment_id : str
        - amount : float
        + process_payment()
    }

    class Cash {}
    class Card {}
    class OnlinePayment {}

    class ReservationManager {
        - reservations : List<Reservation>
        + create_reservation()
        + check_availability()
        + cancel_reservation()
    }

    class Reservation {
        - reservation_id : str
        - customer : Customer
        - date : date
        - start_time : time
        - end_time : time
        - status : str
        + check_in()
    }
}

package "Reporting Module" {
    abstract class SystemLog {
        - log_id : str
        - timestamp : datetime
        - recorded_by : str
    }

    class FinancialLog {
        - amount : float
    }
    class ReservationLog {
        - action : str
    }
    class InventoryLog {
        - item_id : str
    }
    class AuditLog {
        - action_type : str
    }
}

' ==========================================
' RELATIONSHIPS
' ==========================================

' --- 1. Main Structure Hierarchy ---
BoardGameCafeSystem "1" *--> "*" BoardGameCafe
BoardGameCafeSystem "1" *--> "*" Person
BoardGameCafe "1" *--> "*" BoardGame
BoardGameCafe "1" *--> "*" Lobby
Lobby "1" *--> "*" PlayTable

' --- 2. Sub-Systems Connections ---
BoardGameCafe "1" --> "1" MenuList
BoardGameCafe "1" --> "1" OrderSystem
BoardGameCafe "1" --> "1" ReservationManager
BoardGameCafe "1" -r-> "*" SystemLog : logs >

' --- 3. Inheritance Grouping (Person) ---

Person <|-- Owner
Person <|-- Manager
Person <|-- Staff
Staff <|-- Reception
Person <|-- Customer
Customer <|-- Member
Customer <|-- NonMember
Member <|-- MemberSilver
Member <|-- MemberGold
Member <|-- MemberPlatinum

' --- 4. Inheritance Grouping (Items) ---
MenuItem <|-- Food
MenuItem <|-- Drink
MenuList "1" o--> "*" MenuItem

' --- 5. Inheritance Grouping (Ops) ---
Payment <|-- Cash
Payment <|-- Card
Payment <|-- OnlinePayment

' --- 6. Inheritance Grouping (Logs) ---
SystemLog <|-- FinancialLog
SystemLog <|-- ReservationLog
SystemLog <|-- InventoryLog
SystemLog <|-- AuditLog

' --- 7. Operational Flow (Minimal Arrows) ---
OrderSystem "1" --> "*" Order
Order "1" --> "1" Payment
Order "*" --> "1" PlayTable

ReservationManager "1" --> "*" Reservation

@enduml